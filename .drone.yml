kind: pipeline
name: test
steps:
  - name: lint
    image: maven:3-jdk-11-slim
    commands:
      - echo "hello, i am here, linting"
  - name: test
    image: maven:3-jdk-11-slim
    commands:
      - mvn clean test
    depends_on:
      - lint
---
kind: pipeline
name: build
steps:
  - name: build
    image: plugins/docker
    environment:
      TOKEN:
        from_secret: one_of_the_tokens
    settings:
      username:
        from_secret: docker_hub_username
      password:
        from_secret: docker_hub_password
      repo: codefocus/app
      tags:
        - ${DRONE_COMMIT_SHA:-default}
trigger:
  branch:
    - main
